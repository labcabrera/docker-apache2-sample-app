<VirtualHost *:*>

  ServerName localhost
  DocumentRoot /

  # Cache
  CacheQuickHandler off
  CacheLock On
  CacheRoot /tmp/cache/mod_cache
  CacheLockPath /tmp/cache/mod_cache_lock
  CacheIgnoreCacheControl On
  CacheMaxFileSize 100000000
  CacheIgnoreNoLastMod On
  CacheMaxExpire 1209600
  CacheIgnoreQueryString Off

  Header unset Set-Cookie
  Header unset Etag
  Header unset Pragma
  RequestHeader unset Cookie
  Header merge Cache-Control public
  Header merge Cache-Control "max-age=bidon"
  Header edit Cache-Control "^(.*)max-age=(.*)max-age=bidon, (.*)$" $1max-age=$2$3
  Header edit Cache-Control "^(.*)max-age=(.*), max-age=bidon$" $1max-age=$2
  Header edit Cache-Control "max-age=bidon" "max-age=600"
  Header edit Cache-Control "max-age=0" "max-age=600"
  Header edit Cache-Control "no-cache, " ""
  Header edit Cache-Control "no-store, " ""
  Header edit Cache-Control "post-check=0, " ""
  Header edit Cache-Control "pre-check=0, " ""
  Header edit Cache-Control "must-revalidate, " ""

  # Insane log just for check cache traces
  LogLevel debug

  # Deflate
  DeflateCompressionLevel 3
  SetOutputFilter DEFLATE

  <Location "/">
    # Proxy
    ProxyPreserveHost On
    ProxyPass http://0.0.0.0:8080/
    ProxyPassReverse http://0.0.0.0:8080/
    # Cache
    CacheEnable disk /
    CacheHeader on
  </Location>

  # testing this
  <Proxy *>
    <filesMatch "\.(xml|txt|html|js|css)$">
      ExpiresDefault A7200
      Header append Cache-Control "proxy-revalidate"
    </filesMatch>

  </Proxy>

</VirtualHost>
